(function(t){function e(e){for(var n,s,o=e[0],u=e[1],c=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"034f":function(t,e,r){"use strict";r("85ec")},"2e31":function(t,e,r){"use strict";r.r(e);var n=r("2b0e");n["default"].config.productionTip=!1},3014:function(t,e,r){t.exports=r.p+"img/made-in-russia.213df3ed.svg"},3812:function(t,e,r){"use strict";r("b3d8")},"3bf5":function(t,e,r){},4667:function(t,e,r){},"54fc":function(t,e,r){"use strict";r("3bf5")},"5c59":function(t,e,r){"use strict";r("ea7d")},"70b9":function(t,e,r){"use strict";r.r(e);var n=r("5a0c"),a=r.n(n);r("276b"),a.a.locale("ru")},"72c4":function(t,e,r){},"82ea":function(t,e,r){"use strict";r("ce00")},"85ec":function(t,e,r){},"9b19":function(t,e,r){t.exports=r.p+"img/logo.93193bb9.svg"},a347:function(t,e,r){},b3d8:function(t,e,r){},c3c8:function(t,e,r){"use strict";r("72c4")},c417:function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),a=r("5f5b"),i=r("b1e0");r("f9e3"),r("2dd8");n["default"].use(a["a"]),n["default"].use(i["a"])},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"container"},[r("Navbar",{on:{signIn:t.signInWithGoogle,signOut:t.signOut}}),r("router-view")],1),r("Footer")],1)},i=[],s=r("260b"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{style:{background:"#ffffff"},attrs:{toggleable:"lg",type:"light",variant:"custom",sticky:""}},[r("router-link",{attrs:{to:"/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("b-navbar-brand",{attrs:{href:n}},[r("b-avatar",{attrs:{square:"",variant:"transparent",src:t.logoUrl,size:"1.5em"}}),t._v(" WishList ")],1)]}}])}),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[t.user?r("router-link",{attrs:{to:"/user/"+t.user.uid,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("b-nav-item",{attrs:{href:n}},[r("b-icon",{attrs:{icon:"house-door"}}),r("span",{staticClass:"ml-1"},[t._v("Мои желания")])],1)]}}],null,!1,205004600)}):t._e(),t.user?r("router-link",{attrs:{to:"/fav/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("b-nav-item",{attrs:{href:n}},[r("b-icon",{attrs:{icon:"star"}}),r("span",{staticClass:"ml-1"},[t._v("Избранное")])],1)]}}],null,!1,1465522478)}):t._e()],1),r("b-navbar-nav",{staticClass:"ml-auto"},[t.user?r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" "+t._s(t.profile.displayName||t.user.displayName||t.user.email)+" "),r("b-avatar",{staticClass:"ml-1",attrs:{variant:"light",src:t.profile.photoURL||t.user.photoURL}})]},proxy:!0}],null,!1,2308727954)},[r("b-dropdown-item",{attrs:{disabled:"",href:"#"}}),r("router-link",{attrs:{to:"/profile/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("b-dropdown-item",{attrs:{href:n}},[r("b-icon",{attrs:{icon:"person"}}),t._v(" Профиль ")],1)]}}],null,!1,1614293282)}),r("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("signOut")}}},[r("b-icon",{attrs:{icon:"box-arrow-right"}}),t._v(" Выйти ")],1)],1):t._e(),t.user?t._e():r("b-nav-item",{attrs:{right:""},on:{click:function(e){return t.$emit("signIn")}}},[r("b-icon",{attrs:{icon:"google"}}),t._v(" Войти")],1)],1)],1)],1)},u=[],c={name:"Navbar",data:function(){return{logoUrl:r("9b19")}},computed:{user:function(){return this.$store.state.user},profile:function(){return this.$store.state.profile||{}}}},l=c,d=r("2877"),f=Object(d["a"])(l,o,u,!1,null,"3eae4510",null),m=f.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"footer"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"footer-contents d-flex"},[r("span",[t._v("© 2021 Vladimir Shefer.")]),r("a",{attrs:{href:"https://github.com/vladimirshefer/wishlist",target:"_blank"}},[t._v(" GitHub ")]),r("a",{attrs:{href:" https://gitter.im/wishlist-app/community",target:"_blank"}},[t._v(" Gitter ")]),r("img",{staticClass:"ml-auto",attrs:{src:t.madeIn,width:"70",height:"30",alt:"Made in Russia"}})])])])])])},b=[],h={name:"Footer",data:function(){return{madeIn:r("3014")}}},v=h,g=(r("54fc"),Object(d["a"])(v,p,b,!1,null,"1fab2d00",null)),y=g.exports,w=r("1da1"),x=r("d4ec"),k=r("bee2"),_=(r("96cf"),r("2591"));function O(t){return _["a"].firestore().collection(t)}r("e219");var C={wishlistItems:O("wishlistItems"),userProfiles:O("userProfiles"),subscriptions:O("subscriptions")},j=function(){function t(){Object(x["a"])(this,t)}return Object(k["a"])(t,[{key:"saveProfile",value:function(t){var e;C.userProfiles.doc(null===(e=_["a"].auth().currentUser)||void 0===e?void 0:e.uid).set(t,{merge:!0}).catch((function(t){console.error("Could not create or update profile",JSON.stringify(t),t)}))}},{key:"initUserProfile",value:function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=_["a"].auth().currentUser,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.getUserProfileOrNull(e.uid);case 5:return r=t.sent,t.next=8,C.userProfiles.doc(e.uid).set({displayName:(null===r||void 0===r?void 0:r.displayName)||e.displayName,photoURL:(null===r||void 0===r?void 0:r.photoURL)||e.photoURL},{merge:!0});case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUserProfileOrNull",value:function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.userProfiles.doc(e).get();case 3:return r=t.sent,t.abrupt("return",r.data()||null);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),I=new j,P=I,R=n["default"].extend({name:"App",components:{Footer:y,Navbar:m},data:function(){return{form:{name:""},items:[]}},computed:{user:function(){return this.$store.state.user}},methods:{signInWithGoogle:function(){var t=new s["a"].auth.GoogleAuthProvider;s["a"].auth().signInWithPopup(t)},signOut:function(){s["a"].auth().signOut()}},beforeMount:function(){var t=this;this.$store.commit("updateFirebaseAuth",s["a"].auth().currentUser),s["a"].auth().onAuthStateChanged((function(e){t.$store.commit("updateFirebaseAuth",e),P.initUserProfile().then((function(){t.$store.dispatch("reloadUserProfile")}))}))}}),U=R,S=(r("034f"),Object(d["a"])(U,a,i,!1,null,null,null)),$=S.exports,N=(r("a347"),r("8c4f")),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("b-jumbotron",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Мой список желаний")]},proxy:!0},{key:"lead",fn:function(){return[t._v(" Здесь можно поделиться с друзьями идеями подарков для Вас. ")]},proxy:!0}])},[r("hr",{staticClass:"my-4"}),r("p",[t._v(" Список автоматически синхронизируется с облаком. ")]),t.user?r("router-link",{attrs:{to:"/user/"+t.user.uid,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-item",modifiers:{"modal-add-item":!0}}],attrs:{variant:"primary",href:n}},[t._v("Открыть мой список")])]}}])}):r("b-button",{attrs:{variant:"primary",href:"#"},on:{click:t.signInWithGoogle}},[t._v("Войти")])],1)],1)]),t._m(0),r("Feed",{attrs:{"max-size":10}})],1)},E=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h3",[t._v("Желания других пользователей:")])])])}],M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},t._l(t.items,(function(t){return r("FeedItem",{key:t.stored.name+t.stored.uid,attrs:{item:t}})})),1)},z=[],D=r("5530"),B=(r("a9e3"),r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-xs-12 col-md-6 col-lg-4"},[r("div",{staticClass:"p-3 mb-2",staticStyle:{"background-color":"#f3f3f4","border-radius":"3px"}},[r("div",{staticClass:"d-flex align-items-baseline mb-2"},[r("router-link",{attrs:{to:"/user/"+t.item.stored.uid,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("a",{staticClass:"mr-2",attrs:{href:n}},[t.profile?[t.profile.photoURL?r("b-avatar",{staticClass:"mr-1",attrs:{src:t.profile.avatarUrl?t.profile.avatarUrl:t.profile.photoURL,size:"sm"}}):t._e(),t._v(" "+t._s(t.profile.displayName||"Anonymous")+" ")]:[r("b-avatar",{staticClass:"mr-1",attrs:{size:"sm",text:"?"}}),t._v(" "+t._s("Anonymous")+" ")]],2)]}}])}),r("router-link",{attrs:{to:"/wish/"+t.item.id,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("a",{attrs:{href:n}},[r("small",{staticClass:"text-muted"},[t._v(t._s(t.createdAtStr))])])]}}])})],1),r("PseudoImage",{attrs:{text:t.item.stored.name}}),r("div",[r("p",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.item.stored.description))])]),r("div",[r("b",{directives:[{name:"show",rawName:"v-show",value:!t.item.stored.isMoneyCollectingEnabled,expression:"!item.stored.isMoneyCollectingEnabled"}]},[t._v(t._s(t.item.stored.cost)+" ₽")]),r("ProgressBar",{directives:[{name:"show",rawName:"v-show",value:t.item.stored.isMoneyCollectingEnabled,expression:"item.stored.isMoneyCollectingEnabled"}],attrs:{max:t.item.stored.cost,value:t.item.stored.moneyCollected,suffix:"P."}})],1),r("div",{staticClass:"mb-2"},t._l(t.item.stored.tags,(function(t){return r("TagBadge",{key:t,attrs:{tag:t}})})),1),t.item.stored.link?r("b-button",{staticClass:"card-button mr-2",attrs:{href:t.item.stored.link,target:"_blank",size:"sm",variant:"primary"}},[t._v(" Перейти в магазин "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1):t._e(),t.user?[t.isMyItem||t.isAdded?r("b-button",{staticClass:"card-button mr-2",attrs:{target:"_blank",size:"sm",variant:"success",disabled:""}},[r("b-icon",{attrs:{icon:"folder-check"}}),t._v(" "+t._s("Добавлено!")+" ")],1):r("b-button",{staticClass:"card-button mr-2",attrs:{target:"_blank",size:"sm",variant:"success"},on:{click:function(e){return t.addToMyList(t.item)}}},[r("b-icon",{attrs:{icon:"folder-plus"}}),t._v(" "+t._s("Тоже хочу!")+" ")],1),r("b-button",{directives:[{name:"show",rawName:"v-show",value:t.item.stored.donatelink,expression:"item.stored.donatelink"}],staticClass:"mr-2",attrs:{href:t.item.stored.donatelink,target:"_blank",size:"sm",variant:"warning"}},[t._v(" Пожертвовать "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1)]:t._e()],2)])}),F=[],T=r("262e"),W=r("2caf"),L=r("9ab4"),q=function(){function t(){Object(x["a"])(this,t)}return Object(k["a"])(t,[{key:"edit",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.wishlistItems.doc(r).update(t.normalize(n));case 2:case"end":return e.stop()}}),e)})));function r(t,r){return e.apply(this,arguments)}return r}()},{key:"create",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.wishlistItems.add(Object(D["a"])(Object(D["a"])({},t.normalize(r)),{},{uid:null===(n=_["a"].auth().currentUser)||void 0===n?void 0:n.uid,createdAt:_["a"].firestore.FieldValue.serverTimestamp()}));case 2:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()},{key:"getById",value:function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,C.wishlistItems.doc(e).get();case 2:return r=t.sent,t.abrupt("return",r.data());case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}],[{key:"normalize",value:function(t){return delete t.id,"undefined"===typeof t.private?t.private=!1:"string"===typeof t.private&&("false"===t.private?t.private=!1:"true"===t.private?t.private=!0:t.private=!!t.private),t}}]),t}(),G=new q,H=G,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-badge",{staticClass:"tag-badge mr-2",style:{cursor:t.clickable?"pointer":"default"},attrs:{pill:"",variant:t.color},on:{click:function(e){return t.$emit("click")}}},[t._v(" "+t._s(t.tag)+" "),r("b-icon",{attrs:{icon:"tag-fill"}})],1)},V=[],Y=(r("13d5"),r("a630"),r("3ca3"),{hashcode:function(t){return t?Array.from(t).map((function(t){return t.charCodeAt(0)})).reduce((function(t,e){return t+2*e})):0}}),K={name:"TagBadge",props:{tag:{type:String,required:!0},clickable:{type:Boolean,required:!1,default:!1}},data:function(){return{colors:["primary","secondary","success","danger","warning","info","dark"]}},computed:{hashcode:function(){return Y.hashcode(this.tag)},color:function(){return this.colors[this.hashcode%this.colors.length]}}},X=K,Z=(r("e0d5"),Object(d["a"])(X,J,V,!1,null,"65662c90",null)),Q=Z.exports,tt=r("5a0c"),et=r.n(tt),rt=function(){function t(){Object(x["a"])(this,t)}return Object(k["a"])(t,[{key:"displayStringOf",value:function(t){var e=et()();return t.year()!==e.year()?t.format("DD.MM.YYYY, hh:mm"):t.date()!==e.date()?t.format("DD MMM, hh:mm"):t.format("hh:mm")}}]),t}(),nt=new rt,at=nt,it=r("1b40"),st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"feed-item__title crop",style:{background:t.backgroundColor}},[r("h5",{staticClass:"text-center",class:t.textSizeClass},[t._v(" "+t._s(t.text)+" ")])])},ot=[],ut=(r("99af"),function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){return Object(x["a"])(this,r),e.apply(this,arguments)}return Object(k["a"])(r,[{key:"backgroundColor",get:function(){var t=Y.hashcode(this.text)+13,e=["rgb(51, 102, 153), rgb(51, 170, 136)","rgb(51, 102, 153), rgb(136, 51, 170)","rgb(102, 51, 153), rgb(51, 136, 170)","rgb(102, 153, 51), rgb(51, 136, 170)","rgb(153, 51, 102), rgb(51, 136, 170)","rgb(153, 51, 102), rgb(170, 136, 51)","rgb(153, 102, 51), rgb(136, 51, 170)"],r=e[t%e.length],n=t%360;return"linear-gradient(".concat(n,"deg, ").concat(r,")")}},{key:"textSizeClass",get:function(){return this.text.length>50?"":"banner-text"}}]),r}(it["c"]));Object(L["a"])([Object(it["b"])()],ut.prototype,"text",void 0),ut=Object(L["a"])([Object(it["a"])({name:"PseudoImage"})],ut);var ct=ut,lt=ct,dt=(r("c3c8"),Object(d["a"])(lt,st,ot,!1,null,"69836ad5",null)),ft=dt.exports,mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-progress",{staticClass:"position-relative",staticStyle:{background:"darkgray"},attrs:{title:t.title,max:"100",height:"15px"}},[r("b-progress-bar",{attrs:{value:t.percent,variant:t.variant}}),r("span",{staticClass:"justify-content-center d-flex position-absolute w-100 h-100 align-items-center"},[r("strong",{staticStyle:{color:"white"}},[t._v(t._s(t.title)+" "+t._s(t.suffix))])])],1)},pt=[],bt=function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){return Object(x["a"])(this,r),e.apply(this,arguments)}return Object(k["a"])(r,[{key:"valueAsDouble",get:function(){return this.value?+this.value:0}},{key:"maxAsDouble",get:function(){return this.max?+this.max:0}},{key:"percent",get:function(){return this.maxAsDouble?this.valueAsDouble/this.maxAsDouble*100:0}},{key:"variant",get:function(){return this.maxAsDouble?this.valueAsDouble>=this.maxAsDouble?"danger":"primary":"danger"}},{key:"title",get:function(){return this.maxAsDouble?0==this.percent?this.maxAsDouble+"":this.valueAsDouble+" / "+this.maxAsDouble:this.valueAsDouble+""}}]),r}(it["c"]);Object(L["a"])([Object(it["b"])()],bt.prototype,"value",void 0),Object(L["a"])([Object(it["b"])()],bt.prototype,"max",void 0),Object(L["a"])([Object(it["b"])({default:""})],bt.prototype,"suffix",void 0),bt=Object(L["a"])([Object(it["a"])({name:"ProgressBar"})],bt);var ht=bt,vt=ht,gt=(r("3812"),Object(d["a"])(vt,mt,pt,!1,null,"bfbb2e04",null)),yt=gt.exports,wt=function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){var t;return Object(x["a"])(this,r),t=e.apply(this,arguments),t.profile=null,t.isAdded=!1,t}return Object(k["a"])(r,[{key:"user",get:function(){return this.$store.state.user}},{key:"isMyItem",get:function(){return this.item.stored.uid===this.user.uid}},{key:"createdAtStr",get:function(){return at.displayStringOf(this.item.createdAt)}},{key:"addToMyList",value:function(t){this.isAdded||(H.create(t.stored),this.isAdded=!0)}}]),r}(it["c"]);Object(L["a"])([Object(it["b"])()],wt.prototype,"item",void 0),wt=Object(L["a"])([Object(it["a"])({name:"FeedItem",components:{ProgressBar:yt,PseudoImage:ft,TagBadge:Q},beforeMount:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.getUserProfileOrNull((null===(r=t.item)||void 0===r||null===(n=r.stored)||void 0===n?void 0:n.uid)||"");case 2:t.profile=e.sent;case 3:case"end":return e.stop()}}),e)})))()}})],wt);var xt=wt,kt=xt,_t=Object(d["a"])(kt,B,F,!1,null,"65a6bcd2",null),Ot=_t.exports,Ct={name:"Feed",components:{FeedItem:Ot},props:{maxSize:{type:Number,required:!1}},data:function(){return{items:[]}},methods:{init:function(){var t=this,e=C.wishlistItems.where("private","==",!1);this.maxSize>0&&(e=e.limit(this.maxSize)),e.orderBy("createdAt","desc"),e.get().then((function(e){t.items=e.docs.map((function(t){var e=t.data();return{stored:Object(D["a"])({},e),id:t.id,createdAt:e.createdAt?et()(new Date(1e3*e.createdAt.seconds)):null}})).sort((function(t,e){return e.createdAt.unix()-t.createdAt.unix()}))}))}},beforeMount:function(){this.init()}},jt=Ct,It=Object(d["a"])(jt,M,z,!1,null,"732570bb",null),Pt=It.exports,Rt={name:"Home",components:{Feed:Pt},computed:{user:function(){return this.$store.state.user}},methods:{signInWithGoogle:function(){var t=new _["a"].auth.GoogleAuthProvider;_["a"].auth().signInWithPopup(t)}}},Ut=Rt,St=Object(d["a"])(Ut,A,E,!1,null,"0d202ddd",null),$t=St.exports,Nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("UserProfileHeader",{attrs:{"user-id":t.userId}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("UserWishlist",{attrs:{editable:t.isMyPage,"user-id":t.userId}})],1)]),t.isMyPage?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h4",{staticClass:"mt-3"},[t._v("Добавить желание:")]),r("ItemEditForm",{attrs:{item:{}},on:{submit:function(e){return t.addWishlistItem(e)}}})],1)]):t._e()])},At=[],Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[0===t.items.length&&t.dataReady?r("div",{staticClass:"col-12"},[r("div",{staticClass:"card wishlist-item"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"wishlist-item-card"}),r("h3",{staticClass:"card-title"},[t._v(" Все желания уже выполнены? ")]),r("h5",[t._v("В этом списке ничего нет :)")]),t.editable?t._e():r("b-button",{staticClass:"mt-2",attrs:{variant:"primary",href:"/"}},[t._v("На главную")])],1)])]):t._e(),t.dataReady?t._e():r("div",{staticClass:"col-12"},[r("b-overlay",{attrs:{variant:"transparent",show:!t.dataReady,rounded:"sm"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-8",staticStyle:{"min-height":"50px"}})])])],1),t._l(t.items,(function(e){return r("div",{key:e.name,staticClass:"col-12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-0 col-lg-1 col-xl-2"}),r("div",{staticClass:"col-12 col-lg-10 col-xl-8"},[r("ItemCardWrapper",{attrs:{item:e,editable:t.editable},on:{remove:function(r){return t.removeWishlistItem(e.id)},update:function(e){return t.editItem(e)}}})],1),r("div",{staticClass:"col-0 col-lg-1 col-xl-2"})])])}))],2)},Mt=[],zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-1"},[r("ItemCard",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],attrs:{item:t.item,editable:t.editable},on:{remove:function(e){return t.$emit("remove",e)},edit:function(e){t.isEditing=!0}}}),t.isEditing?r("ItemEditForm",{attrs:{item:t.item},on:{submit:function(e){t.$emit("update",e),t.isEditing=!1},cancel:function(e){t.isEditing=!1}}}):t._e()],1)},Dt=[],Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("b-form",{on:{submit:function(e){return t.submit(e)},reset:t.cancel}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Что я хочу:","label-for":"input-name"}},[r("b-form-input",{attrs:{id:"input-name",placeholder:"Новая куртка",required:"",maxlength:"80"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-description",label:"Комментарий","label-for":"input-description"}},[r("b-form-textarea",{attrs:{id:"input-description",type:"string",size:"sm",placeholder:"Мне это нужно для...",rows:"3","max-rows":"8",maxlength:"160"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._e()],1),r("b-form-group",{attrs:{id:"input-group-cost",label:"Стоимость:","label-for":"input-cost",description:""}},[r("b-form-input",{attrs:{id:"input-cost",type:"number",min:"0",step:"0.01",placeholder:"10000.0",required:""},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),r("b-form-checkbox",{attrs:{id:"show-collecting",name:"show-collecting"},model:{value:t.form.isMoneyCollectingEnabled,callback:function(e){t.$set(t.form,"isMoneyCollectingEnabled",e)},expression:"form.isMoneyCollectingEnabled"}},[t._v(" Показывать мои накопления ")]),t.form.isMoneyCollectingEnabled?r("b-form-group",{attrs:{id:"input-group-money-collected",label:"Сколько денег накоплено:","label-for":"input-money-collected"}},[r("b-form-input",{attrs:{id:"input-money-collected",type:"number",name:"input-money-collected",min:"0",step:"0.01",placeholder:"10000.0",required:""},model:{value:t.form.moneyCollected,callback:function(e){t.$set(t.form,"moneyCollected",e)},expression:"form.moneyCollected"}})],1):t._e(),r("b-form-group",{attrs:{id:"input-group-link",label:"Ссылка на товар:","label-for":"input-link"}},[r("b-form-input",{attrs:{id:"input-link",type:"url",placeholder:"https://...",maxlength:"200"},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}})],1),r("b-form-group",{attrs:{id:"input-group-donatelink",label:"Ссылка для пожертвований (Яндекс Деньги, ЮMoney, PayPal или другой ресурс):","label-for":"input-donatelink"}},[r("b-form-input",{attrs:{id:"input-donatelink",type:"url",placeholder:"https://...",maxlength:"200"},model:{value:t.form.donatelink,callback:function(e){t.$set(t.form,"donatelink",e)},expression:"form.donatelink"}})],1),r("b-form-group",{attrs:{id:"input-group-tags",label:"Теги:","label-for":"input-tags"}},[r("div",{staticClass:"mb-2"},t._l(t.form.tags,(function(e){return r("TagBadge",{key:e,attrs:{tag:e,clickable:""},on:{click:function(r){return t.removeTag(e)}}})})),1),r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Одежда"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag(e)}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addTag}},[t._v(" Добавить ")])],1)],1),r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v(" Сохранить ")]),r("b-button",{staticClass:"mr-1",attrs:{type:"reset",size:"sm",variant:"danger"}},[t._v(" Отмена ")])],1)],1)])},Ft=[],Tt=(r("caad"),r("2532"),r("4de4"),{name:"ItemEditForm",components:{TagBadge:Q},props:{item:{type:Object,required:!0}},data:function(){return{form:{name:"",cost:0,moneyCollected:0,isMoneyCollectingEnabled:!1,link:"",donatelink:"",tags:[],description:""},tag:""}},methods:{reset:function(){this.form=JSON.parse(JSON.stringify(this.item))},submit:function(t){t.preventDefault(),t.stopPropagation(),this.$emit("submit",this.getResultingObject()),this.reset()},cancel:function(){this.$emit("cancel"),this.reset()},getResultingObject:function(){return Object.assign({},this.item,this.form)},addTag:function(t){t.preventDefault(),this.form.tags||(this.form.tags=[]),this.tag&&!this.form.tags.includes(this.tag)&&this.form.tags.push(this.tag),this.tag=""},removeTag:function(t){this.form.tags=this.form.tags.filter((function(e){return e!==t}))}},created:function(){this.reset()}}),Wt=Tt,Lt=Object(d["a"])(Wt,Bt,Ft,!1,null,null,null),qt=Lt.exports,Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-12"},[r("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[r("h5",{staticClass:"card-title overflow-trimmed"},[t._v(" "+t._s(t.item.name)+" ")]),r("div",{staticClass:"dropdown-b-dropdown"},[t.editable?r("b-dropdown",{attrs:{variant:"light",size:"sm"}},[r("b-dropdown-item",{on:{click:function(e){return t.$emit("edit")}}},[t._v("Изменить")]),r("b-dropdown-item",{on:{click:t.tryRemove}},[t._v("Удалить")])],1):t._e()],1)])]),r("div",{staticClass:"col-md-4 d-md-flex justify-content-md-end col-12"},[r("p",[r("b",{directives:[{name:"show",rawName:"v-show",value:!t.item.isMoneyCollectingEnabled||!t.item.moneyCollected,expression:"!item.isMoneyCollectingEnabled || !item.moneyCollected"}]},[t._v(t._s(t.item.cost)+" ₽")])])])]),r("div",[r("p",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.item.description))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.item.isMoneyCollectingEnabled,expression:"item.isMoneyCollectingEnabled"}],staticClass:"row position-relative mt-2 mb-3"},[r("div",{staticClass:"col-12 col-lg-6"},[r("ProgressBar",{attrs:{max:t.item.cost,value:t.item.moneyCollected,suffix:"P."}})],1)]),r("div",{staticClass:"mb-2"},t._l(t.item.tags,(function(t){return r("TagBadge",{key:t,attrs:{tag:t}})})),1),r("hr"),r("div",{staticClass:"d-flex justify-content-between"},[r("div",{staticClass:"d-flex"},[r("ItemCardOpenButton",{attrs:{name:t.item.name,link:t.item.link}}),r("b-button",{directives:[{name:"show",rawName:"v-show",value:t.item.donatelink,expression:"item.donatelink"}],staticClass:"ml-2",attrs:{href:t.item.donatelink,target:"_blank",size:"sm",variant:"warning"}},[t._v(" Пожертвовать "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1)],1),r("div",[r("span",{staticClass:"text-muted"},[t._v(t._s(t.createdAtStr))])])])])])])},Ht=[],Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.link?r("b-button",{attrs:{href:t.link,target:"_blank",size:"sm",variant:"primary"}},[t._v(" Открыть "),r("b-icon",{attrs:{icon:"box-arrow-up-right"}})],1):r("b-button",{attrs:{href:t.searchLink,target:"_blank",size:"sm",variant:"primary"}},[r("b-icon",{attrs:{icon:"google"}}),t._v(" Поиск ")],1)],1)},Vt=[],Yt=(r("b0c0"),function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){return Object(x["a"])(this,r),e.apply(this,arguments)}return Object(k["a"])(r,[{key:"searchLink",get:function(){return"https://www.google.com/search?q="+this.name}}]),r}(it["c"]));Object(L["a"])([Object(it["b"])()],Yt.prototype,"name",void 0),Object(L["a"])([Object(it["b"])()],Yt.prototype,"link",void 0),Yt=Object(L["a"])([Object(it["a"])({name:"ItemCardOpenButton"})],Yt);var Kt=Yt,Xt=Kt,Zt=Object(d["a"])(Xt,Jt,Vt,!1,null,"615e56d2",null),Qt=Zt.exports,te=function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){return Object(x["a"])(this,r),e.apply(this,arguments)}return Object(k["a"])(r,[{key:"tryRemove",value:function(){confirm("Удалить желание?")&&this.$emit("remove")}},{key:"createdAtStr",get:function(){var t=this.item.createdAt?et()(new Date(1e3*this.item.createdAt.seconds)):null;return t?at.displayStringOf(t):""}}]),r}(it["c"]);Object(L["a"])([Object(it["b"])()],te.prototype,"item",void 0),Object(L["a"])([Object(it["b"])()],te.prototype,"editable",void 0),te=Object(L["a"])([Object(it["a"])({name:"ItemCard",components:{ProgressBar:yt,TagBadge:Q,ItemCardOpenButton:Qt}})],te);var ee=te,re=ee,ne=(r("5c59"),Object(d["a"])(re,Gt,Ht,!1,null,null,null)),ae=ne.exports,ie={name:"ItemCardWrapper",components:{ItemCard:ae,ItemEditForm:qt},props:{item:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!1}},data:function(){return{isEditing:!1}}},se=ie,oe=Object(d["a"])(se,zt,Dt,!1,null,"16e56db4",null),ue=oe.exports,ce={name:"UserWishlist",components:{ItemCardWrapper:ue},props:{userId:{type:String,required:!1},editable:{type:Boolean,required:!1,default:!1}},data:function(){return{items:[],dataReady:!1,unsubscribe:function(){}}},methods:{removeWishlistItem:function(t){this.editable&&C.wishlistItems.doc(t).delete()},editItem:function(t){H.edit(t.id,t)},init:function(t){var e=this;if(this.unsubscribe(),null!=t){var r=C.wishlistItems.where("uid","==",t);this.editable||(r=r.where("private","==",!1)),this.unsubscribe=r.onSnapshot((function(t){e.items=t.docs.map((function(t){return Object(D["a"])(Object(D["a"])({},t.data()),{},{id:t.id})})),e.dataReady=!0}))}else this.items=[],this.dataReady=!0}},watch:{userId:function(t){this.init(t)},editable:function(){this.init(this.userId)}},beforeMount:function(){this.init(this.userId)}},le=ce,de=Object(d["a"])(le,Et,Mt,!1,null,"6dc2ef16",null),fe=de.exports,me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.profile?r("div",{staticClass:"p-3 d-flex"},[r("div",{staticClass:"mr-4"},[t.profile.photoURL?r("b-avatar",{attrs:{square:"",size:"lg",variant:"light",src:t.profile.avatarUrl?t.profile.avatarUrl:t.profile.photoURL}}):t._e()],1),r("div",[r("div",{staticClass:"d-flex"},[r("h1",{staticClass:"d-inline mr-1 align-baseline",staticStyle:{"font-size":"2rem","font-weight":"bold"}},[r("router-link",{attrs:{to:"/user/"+t.userId,custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.href;return[r("a",{attrs:{href:n}},[t._v(" "+t._s(t.profile.displayName)+" ")]),r("a",{directives:[{name:"show",rawName:"v-show",value:null!==t.subscribed&&t.user&&t.user.uid!==t.userId,expression:"subscribed !== null && user && user.uid !== userId"}],attrs:{title:t.subscribed?"Удалить из избранного":"Добавить в избранное"},on:{click:t.toggleSubscription}},[r("b-icon",{attrs:{scale:"0.6",icon:t.subscribed?"star-fill":"star"}})],1)]}}],null,!1,2683187254)})],1)]),r("p",[t._v(" "+t._s(t.profile.about)+" ")])])]):t._e()},pe=[],be={subscribe:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,C.subscriptions.doc("".concat(t,"_").concat(e)).set({subscriber:t,subject:e},{merge:!0});case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error("Could not subscribe ".concat(t," on ").concat(e),JSON.stringify(r.t0),r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},unsubscribe:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,C.subscriptions.doc("".concat(t,"_").concat(e)).delete();case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error("Could not unsubscribe ".concat(t," from ").concat(e),JSON.stringify(r.t0),r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},getSubscriptionOrNull:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t!==e){r.next=2;break}return r.abrupt("return",null);case 2:return r.prev=2,n="".concat(t,"_").concat(e),r.next=6,C.subscriptions.doc(n).get();case 6:if(r.t0=r.sent.data(),r.t0){r.next=9;break}r.t0=null;case 9:return r.abrupt("return",r.t0);case 12:return r.prev=12,r.t1=r["catch"](2),console.error(r.t1),r.abrupt("return",null);case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},getSubscriptions:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,C.subscriptions.where("subscriber","==",t).get();case 4:return r=e.sent,e.abrupt("return",r.docs.map((function(t){return t.data()})));case 6:case"end":return e.stop()}}),e)})))()}},he={name:"UserProfileHeader",props:{userId:{}},data:function(){return{profile:null,subscribed:!1}},computed:{user:function(){return this.$store.state.user}},methods:{reloadUserProfile:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,P.getUserProfileOrNull(t);case 2:if(r.t0=r.sent,r.t0){r.next=5;break}r.t0={};case 5:if(e.profile=r.t0,!e.isMyPage&&e.user){r.next=10;break}e.subscribed=null,r.next=13;break;case 10:return r.next=12,be.getSubscriptionOrNull(e.user.uid,t);case 12:e.subscribed=!!r.sent;case 13:case"end":return r.stop()}}),r)})))()},toggleSubscription:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.user){e.next=2;break}return e.abrupt("return");case 2:if(r=t.subscribed,t.subscribed=null,!1!==r){e.next=9;break}return e.next=7,be.subscribe(t.user.uid,t.userId);case 7:e.next=11;break;case 9:return e.next=11,be.unsubscribe(t.user.uid,t.userId);case 11:return e.next=13,t.reloadUserProfile(t.userId);case 13:case"end":return e.stop()}}),e)})))()}},watch:{userId:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.reloadUserProfile(t);case 2:case"end":return r.stop()}}),r)})))()},user:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reloadUserProfile(t.userId);case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reloadUserProfile(t.userId);case 2:case"end":return e.stop()}}),e)})))()}},ve=he,ge=(r("82ea"),Object(d["a"])(ve,me,pe,!1,null,"1bda9234",null)),ye=ge.exports,we={name:"User",components:{UserProfileHeader:ye,ItemEditForm:qt,UserWishlist:fe},computed:{user:function(){return this.$store.state.user},userId:function(){return this.$route.params.userId},isMyPage:function(){return this.user&&this.user.uid===this.userId}},methods:{addWishlistItem:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.create(t);case 2:case"end":return e.stop()}}),e)})))()}},watch:{userId:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.reloadUserProfile(t);case 2:case"end":return r.stop()}}),r)})))()},user:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reloadUserProfile(t.userId);case 2:case"end":return e.stop()}}),e)})))()}}},xe=we,ke=Object(d["a"])(xe,Nt,At,!1,null,"3d9eb483",null),_e=ke.exports,Oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return this.user?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("b-form",{on:{submit:function(e){return t.submit(e)},reset:function(e){return t.reset(e)}}},[r("b-form-group",{attrs:{id:"input-group-display-name",label:"Отображаемое имя","label-for":"input-display-name"}},[r("b-form-input",{attrs:{id:"input-display-name",required:""},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),r("b-form-group",{attrs:{id:"input-group-avatar-url",label:"Ссылка на аватар","label-for":"input-avatar-url"}},[r("b-form-input",{attrs:{id:"input-avatar-url"},model:{value:t.avatarUrl,callback:function(e){t.avatarUrl=e},expression:"avatarUrl"}})],1),r("b-form-group",{attrs:{id:"input-group-about",label:"О себе:","label-for":"input-about"}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.about,expression:"about"}],staticClass:"form-control",attrs:{id:"input-about",rows:"3"},domProps:{value:t.about},on:{input:function(e){e.target.composing||(t.about=e.target.value)}}})]),r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Сохранить")]),r("b-button",{staticClass:"mr-1",attrs:{type:"reset",size:"sm",variant:"danger"}},[t._v("Сбросить")])],1)],1)])])]):t._e()},Ce=[],je={name:"Profile",data:function(){return{form:{displayName:null,label:null,about:null,avatarUrl:null}}},computed:{user:function(){return this.$store.state.user},profile:function(){return this.$store.state.profile},storedProfile:function(){return{displayName:(this.profile?this.profile.displayName:null)||(this.user?this.user.displayName:null),about:this.profile?this.profile.about:null}},displayName:{get:function(){return this.form.displayName||this.storedProfile.displayName||""},set:function(t){this.form.displayName=t}},about:{get:function(){return null!=this.form.about?this.form.about:this.profile?this.storedProfile.about:""},set:function(t){this.storedProfile.about!==t?this.form.about=t:this.form.about=null}},avatarUrl:{get:function(){return this.form.avatarUrl||""},set:function(t){this.form.avatarUrl=t}}},methods:{submit:function(t){t.preventDefault(),t.stopPropagation(),P.saveProfile({displayName:this.displayName,about:this.about,avatarUrl:this.avatarUrl}),this.$store.dispatch("reloadUserProfile")},reset:function(t){t.preventDefault(),t.stopPropagation(),this.form=Object(D["a"])({},this.storedProfile)}}},Ie=je,Pe=Object(d["a"])(Ie,Oe,Ce,!1,null,"3119d4d7",null),Re=Pe.exports,Ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},t._l(t.users,(function(t){return r("div",{key:t.subject,staticClass:"col-12"},[r("UserProfileHeader",{attrs:{"user-id":t.subject}})],1)})),0)},Se=[],$e={name:"Favorites",components:{UserProfileHeader:ye},data:function(){return{users:[]}},computed:{user:function(){return this.$store.state.user}},methods:{init:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,be.getSubscriptions(null===(r=t.user)||void 0===r?void 0:r.uid);case 2:t.users=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},watch:{user:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:case"end":return e.stop()}}),e)})))()}},beforeMount:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:case"end":return e.stop()}}),e)})))()}},Ne=$e,Ae=Object(d["a"])(Ne,Ue,Se,!1,null,"babc42c0",null),Ee=Ae.exports,Me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mb-3"},[r("a",{attrs:{href:t.authorUrl}},[r("b-avatar",{staticClass:"mr-1",attrs:{size:"1.5em",src:t.authorPhotoUrl}}),r("b",{staticClass:"mr-2"},[t._v(t._s(t.authorName))])],1),r("small",{staticClass:"text-muted"},[t._v(t._s(t.createdAtStr))])]),r("div",{staticClass:"col-sm-12 col-lg-4 mb-sm-2 mb-lg-0"},[r("PseudoImage",{attrs:{text:t.wish.name}})],1),r("div",{staticClass:"col-sm-12 col-lg-8"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-8"},[r("h5",[t._v(t._s(t.wish.name)+" ")]),r("p",[t._v(t._s(t.wish.description))])]),r("div",{staticClass:"col-4"},[r("p",[t._v(t._s(t.wish.cost)+" rub.")])])])])])},ze=[],De=function(t){Object(T["a"])(r,t);var e=Object(W["a"])(r);function r(){var t;return Object(x["a"])(this,r),t=e.apply(this,arguments),t.wish=null,t.authorProfile=null,t}return Object(k["a"])(r,[{key:"wishId",get:function(){return this.$route.params.wishId}},{key:"createdAtStr",get:function(){var t;if(null!==(t=this.wish)&&void 0!==t&&t.createdAt){var e=et()(new Date(1e3*this.wish.createdAt.seconds));return at.displayStringOf(e)}return"posted"}},{key:"authorUrl",get:function(){if(this.wish&&this.wish.uid){var t="/user/"+this.wish.uid;return this.$router.resolve(t).href}return null}},{key:"authorPhotoUrl",get:function(){var t;return(null===(t=this.authorProfile)||void 0===t?void 0:t.photoURL)||null}},{key:"authorName",get:function(){var t;return(null===(t=this.authorProfile)||void 0===t?void 0:t.displayName)||"Anonymous"}},{key:"init",value:function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,H.getById(this.wishId);case 2:if(e=t.sent,this.wish=e,null===e){t.next=8;break}return t.next=7,P.getUserProfileOrNull(e.uid||"");case 7:this.authorProfile=t.sent;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),r}(it["c"]);De=Object(L["a"])([Object(it["a"])({name:"WishPage",components:{PseudoImage:ft},watch:{wishId:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.init()}})],De);var Be=De,Fe=Be,Te=Object(d["a"])(Fe,Me,ze,!1,null,"e4b337b6",null),We=Te.exports;n["default"].use(N["a"]);var Le=[{path:"/",component:$t},{path:"/user/:userId",component:_e},{path:"/profile",component:Re},{path:"/fav",component:Ee},{path:"/wish/:wishId",component:We}],qe=new N["a"]({routes:Le}),Ge=qe,He=r("2f62");n["default"].use(He["a"]);var Je=new He["a"].Store({state:{user:null,profile:null},mutations:{updateFirebaseAuth:function(t,e){t.user=e,e||(this.state.profile=null)},setUserProfile:function(t,e){t.profile=e}},actions:{reloadUserProfile:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.user){e.next=6;break}return e.next=3,P.getUserProfileOrNull(t.state.user.uid);case 3:r=e.sent,e.next=7;break;case 6:r=null;case 7:t.commit("setUserProfile",r);case 8:case"end":return e.stop()}}),e)})))()}}}),Ve=Je;r("c417"),r("e219"),r("2e31"),r("70b9"),new n["default"]({render:function(t){return t($)},router:Ge,store:Ve}).$mount("#app")},ce00:function(t,e,r){},e0d5:function(t,e,r){"use strict";r("4667")},e219:function(t,e,r){"use strict";r.r(e);var n=r("2591"),a=(r("ea7b"),r("e71f"),{apiKey:"AIzaSyACtgZ3RVsV4asdNWLtlbTtbrb-BocsXjk",authDomain:"wishlist-for-friends.firebaseapp.com",projectId:"wishlist-for-friends",storageBucket:"wishlist-for-friends.appspot.com",messagingSenderId:"491027786294",appId:"1:491027786294:web:ed36804351917d5052c697"});n["a"].initializeApp(a)},ea7d:function(t,e,r){}});
//# sourceMappingURL=app.eabb045f.js.map